% Created 2015-01-23 Fri 14:27
\documentclass[presentation]{beamer}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{fixltx2e}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage{float}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{marvosym}
\usepackage{wasysym}
\usepackage{amssymb}
\usepackage{hyperref}
\tolerance=1000
\usetheme{default}
\author{Gabriel Becker}
\date{\today}
\title{The switchr package}
\hypersetup{
  pdfkeywords={},
  pdfsubject={},
  pdfcreator={Emacs 24.3.1 (Org mode 8.2.10)}}
\begin{document}

\maketitle



\section{Package versions matter}
\label{sec-1}

\begin{frame}[label=sec-1-1]{Reproducing results}
\begin{itemize}
\item Use same version as original author(s)
\end{itemize}
\end{frame}
\begin{frame}[label=sec-1-2]{Developing packages}
\begin{itemize}
\item Program against latest/devel versions of dependencies
\end{itemize}
\end{frame}
\begin{frame}[label=sec-1-3]{Collaboration}
\begin{itemize}
\item Have single set of versions used by all participants
\end{itemize}
\end{frame}

\section{Packages live in different places}
\label{sec-2}
\begin{frame}[label=sec-2-1]{Github}
\end{frame}
\begin{frame}[label=sec-2-2]{Package repositories}
\end{frame}
\begin{frame}[label=sec-2-3]{CRAN Archive}
\end{frame}
\begin{frame}[label=sec-2-4]{SCM commit history}
\end{frame}

\section{What do we need?}
\label{sec-3}
\begin{frame}[label=sec-3-1]{Install the versions we need}
\begin{itemize}
\item on command
\item directly from where they live
\end{itemize}
\end{frame}
\begin{frame}[label=sec-3-2]{Distinct, side-by-side package libraries}
\begin{itemize}
\item Don't want to clobber our main install to reproduce old result
\item Development and analysis
\end{itemize}
\end{frame}
\begin{frame}[label=sec-3-3]{Recreate others' environments}
\end{frame}
\begin{frame}[label=sec-3-4]{Publish our environments}
\begin{itemize}
\item So that others can recreate them
\end{itemize}
\end{frame}

\section{switchr does that}
\label{sec-4}

\section{Package manifests}
\label{sec-5}
\begin{frame}[label=sec-5-1]{Generalized Package repository}
\begin{itemize}
\item List of packages
\begin{itemize}
\item where their source lives
\item info necessary to retrieve them
\end{itemize}
\item Optional version restrictions
\end{itemize}
\end{frame}
\section{And now the 'main' event}
\label{sec-6}
\begin{frame}[fragile,label=sec-6-1]{Creating a new library}
 \begin{Code}
switchTo("mynewlib")
\end{Code}

\begin{verbatim}
Switched to the 'mynewlib' computing environment. 29 packages are currently available. Packages installed in your site library ARE suppressed.
 To switch back to your previous environment type switchBack()
\end{verbatim}
\end{frame}


\begin{frame}[fragile,label=sec-6-2]{Switching between libraries}
 \begin{Code}
switchBack()
\end{Code}

\begin{verbatim}
Reverted to the 'mynewlib' computing environment. 29 packages are currently available. Packages installed in your site library ARE suppressed.
 To switch back to your previous environment type switchBack()
\end{verbatim}


\begin{Code}
switchTo("mynewlib")
\end{Code}

\begin{verbatim}
Switched to the 'mynewlib' computing environment. 29 packages are currently available. Packages installed in your site library ARE suppressed.
 To switch back to your previous environment type switchBack()
\end{verbatim}
\end{frame}

\begin{frame}[fragile,label=sec-6-3]{Creating a manifest}
 \begin{Code}
man = GithubManifest("gmbecker/fastdigest", "gmbecker/RCacheSuite",
    "duncantl/CodeDepends")
man
\end{Code}

\begin{verbatim}
A package manifest (PkgManifest object)

Contains 3 packages and 5 dependency repositories

Packages:
         name type
1  fastdigest  git
2 RCacheSuite  git
3 CodeDepends  git
\end{verbatim}
\end{frame}

\begin{frame}[fragile,label=sec-6-4]{Installing from a manifest}
 \begin{Code}
install_packages("RCacheSuite", man)
\end{Code}
\begin{Code}
head(installed.packages()[,c("Package", "Version")], 4)
\end{Code}

\begin{verbatim}
            Package       Version   
CodeDepends "CodeDepends" "0.3-5"   
fastdigest  "fastdigest"  "0.5-1"   
RCacheSuite "RCacheSuite" "0.0-1"   
XML         "XML"         "3.98-1.1"
\end{verbatim}
\end{frame}

\begin{frame}[fragile,label=sec-6-5]{Generating a manifest from a library}
 \begin{Code}
man2 = libManifest()
man2
\end{Code}

\begin{verbatim}
A seeding manifest (SessionManifest object)

Describes a cohort of 4 package versions. 
4 packages are listed in the underlying package manifest

Package versions:
         name  version
1 CodeDepends    0.3-5
2  fastdigest    0.5-1
3 RCacheSuite    0.0-1
4         XML 3.98-1.1
\end{verbatim}
\end{frame}

\begin{frame}[fragile,label=sec-6-6]{Publishing a manifest to a Gist}
 \begin{Code}
library(switchrGist)
publishManifest(man, Gist())
\end{Code}
\end{frame}

\begin{frame}[fragile,label=sec-6-7]{Traveling back in time}
 \begin{Code}
man3.0 = rVersionManifest("3.0.0")
man3.0
\end{Code}

\begin{verbatim}
 "..."       "..."    
5006 "zmatrix"   "tarball"
5007 "zoeppritz" "tarball"
5008 "zoo"       "tarball"
5009 "zooimage"  "tarball"
5010 "zyp"       "tarball"
\end{verbatim}
\end{frame}
% Emacs 24.3.1 (Org mode 8.2.10)
\end{document}
